chrome.runtime.onMessage.addListener(function(e,t,o){if(e.type==="loadHtml"){document.querySelector(".accordion").innerHTML+=e.data}if(e.type==="changeHtml"){var c=e.id;var r=document.querySelector("."+c+"-out");var c=r.querySelector("a");c.href=e.link}if(e.type==="UpdateTotal"&&e.total!=0){var c=e.id;var r=document.querySelector(".total"+c);if(r!=null){r.textContent=e.total;var n=document.querySelector("#noti-trade");if(n.checked){var a=document.querySelector(".noti");a.value+="Item "+c+" has been listing on https://www.pathofexile.com/trade/search/Settlers/"+e.trade_id+" \nTotal: "+e.total+"\n"+"------\n";a.scrollTop=a.scrollHeight}}}});function toggleButton(){const e=document.querySelector(".detect");const t=e.classList.toggle("toggled");const o=document.querySelector("#not-implict");if(t){e.classList.add("starting");e.textContent="Detecting...";document.querySelector(".note").textContent="Note: Click lần nữa để kết thúc và lưu dữ liệu!";chrome.storage.local.set({buttonState:"toggled"})}else{e.classList.remove("starting");e.textContent="Start Detect";document.querySelector(".note").textContent="Note: Click Start và đợi cho tới khi load hết item!";chrome.storage.local.remove("buttonState")}chrome.tabs.query({active:true,currentWindow:true},e=>{chrome.tabs.sendMessage(e[0].id,{action:"buttonClicked",implict:o.checked})})}document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".detect");var o=document.getElementById("myCheckbox");chrome.storage.sync.get("myCheckbox",function(e){if(e.myCheckbox!==undefined){o.checked=e.myCheckbox}});chrome.storage.local.get("buttonState",e=>{if(e.buttonState==="toggled"){t.classList.add("starting");t.textContent="Detecting...";document.querySelector(".note").textContent="Note: Click lần nữa để kết thúc!";t.classList.add("toggled")}});t.addEventListener("click",toggleButton);var c=document.querySelector("#check-list");var e=document.querySelector("#trade-with");var n=document.querySelector("#not-implict");const r=document.querySelector(".accordion");r.addEventListener("change",o=>{if(!o.target.classList.contains("auto-check")){var c;if(o.target.checked===true){c="addMod"}else{c="removeMod"}const e=o.target.closest("li").innerText;const t=o.target.closest("div").id;var r={id:t.slice(0,-3),result:{attribute:e.trim(),values:[o.target.value],index:o.target.index},isImplict:n.checked};chrome.tabs.query({active:true,currentWindow:true},function(e){var t=e[0].id;chrome.tabs.sendMessage(t,{type:c,data:r})})}else{var c;if(o.target.checked===true){c="onCheck"}else{c="offCheck"}const e=o.target.id;var r={id:e.slice(0,-6)};chrome.tabs.query({active:true,currentWindow:true},function(e){var t=e[0].id;chrome.tabs.sendMessage(t,{type:c,data:r})})}});c.addEventListener("change",()=>{if(c.checked===true){document.querySelector("#noti-trade-off").disabled=false;document.querySelector("#noti-trade").disabled=false;document.querySelector("#noti-trade-unique").disabled=true}else{document.querySelector("#noti-trade-off").disabled=true;document.querySelector("#noti-trade").disabled=true;document.querySelector("#noti-trade-unique").disabled=true}chrome.tabs.query({active:true,currentWindow:true},function(e){var t=e[0].id;chrome.tabs.sendMessage(t,{type:"autoCheck",auto:c.checked})})});e.addEventListener("change",()=>{if(e.checked===true){document.querySelector("#less").disabled=false}else{document.querySelector("#less").disabled=true}});if(e.checked===true){document.querySelector("#less").disabled=false}else{document.querySelector("#less").disabled=true}});